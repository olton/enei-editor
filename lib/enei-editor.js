/*!
 * ENEI Editor for ENEI CMS
 * Copyright 2023 Serhii Pimenov
 * Licensed under MIT
 !*/
!function(){"use strict";!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}("[enei]{border:1px dashed transparent}.enei_editor_mode [enei]{border-color:#468cff}.enei__overlay{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background:rgba(0,0,0,.4);bottom:0;justify-content:center;left:0;right:0;top:0;z-index:100000}.enei__editor,.enei__overlay{display:-webkit-box;display:-ms-flexbox;display:flex;position:fixed}.enei__editor{-webkit-box-orient:vertical;-webkit-box-direction:normal;background:#fff;-ms-flex-flow:column;flex-flow:column}.enei__editor .enei__text{margin:4px;padding:4px}.enei__editor .enei__text[contenteditable=true]{border:1px solid #acacac;outline:1px solid #acacac}.enei__editor .enei__actions{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-box-pack:start;-ms-flex-pack:start;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;justify-content:start;padding:0 10px 4px 2px}.enei__editor .enei__actions *{margin-left:2px}.enei__button{-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#468cff;border:1px solid transparent;color:#fff;cursor:pointer;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;font-size:12px;font-weight:400;height:28px;justify-content:center;outline:none;overflow:visible;padding:0 8px;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.enei__button .caption+.icon,.enei__button .icon+.caption{margin-left:8px}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9pbmRleC5sZXNzIiwiaW5kZXgubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUNJLDZCQ0hKLENETUEseUJBQ0ksb0JDSkosQ0RPQSxlQVNJLHdCQUFBLENBQUEscUJBQUEsQ0FDQSx1QkFBQSxDQUFBLG9CQUFBLENBREEsa0JBQUEsQ0FGQSx5QkFBQSxDQURBLFFBQUEsQ0FJQSxzQkFBQSxDQU5BLE1BQUEsQ0FDQSxPQUFBLENBRkEsS0FBQSxDQUZBLGNDSUosQ0RRQSw2QkFMSSxtQkFBQSxDQUFBLG1CQUFBLENBQUEsWUFBQSxDQU5BLGNDU0osQ0RFQSxjQUdJLDJCQUFBLENBQUEsNEJBQUEsQ0FDQSxlQUFBLENBREEsb0JBQUEsQ0FBQSxnQkNMSixDREVBLDBCQVFRLFVBQUEsQ0FDQSxXQ1BSLENEU1EsZ0RBQ0ksd0JBQUEsQ0FDQSx5QkNQWixDRE5BLDZCQW1CUSw2QkFBQSxDQUFBLDRCQUFBLENBQ0Esc0JBQUEsQ0FBQSxtQkFBQSxDQUZBLG1CQUFBLENBQUEsbUJBQUEsQ0FBQSxZQUFBLENBQ0Esd0JBQUEsQ0FBQSxvQkFBQSxDQUNBLHFCQUFBLENBQ0Esc0JDVFIsQ0RaQSwrQkF3QlksZUNUWixDRGNBLGNBRUksd0JBQUEsQ0FBQSxxQkFBQSxDQUNBLHVCQUFBLENBQUEsb0JBQUEsQ0FEQSxrQkFBQSxDQVdBLHdCQUFBLENBSkEsNEJBQUEsQ0FLQSxVQUFBLENBQ0EsY0FBQSxDQWRBLDBCQUFBLENBQUEsMEJBQUEsQ0FBQSxtQkFBQSxDQVVBLGNBQUEsQ0FQQSxlQUFBLENBUUEsV0FBQSxDQVRBLHNCQUFBLENBYUEsWUFBQSxDQUVBLGdCQUFBLENBUkEsYUFBQSxDQU9BLGlCQUFBLENBWkEsaUJBQUEsQ0FHQSx3QkFBQSxDQUFBLHFCQUFBLENBQUEsb0JBQUEsQ0FBQSxnQkFBQSxDQURBLHFCQUFBLENBREEsa0JDQUosQ0ROQSwwREF3QlEsZUNaUiIsImZpbGUiOiJpbmRleC5sZXNzIn0= */"),globalThis.eneiEditorKey||(globalThis.eneiEditorKey="ctr+alt+k");const e="enei_editor_mode";new class{body=null;editor=null;overlay=null;content=null;constructor(){this.addEvents(),this.body=document.querySelector("body")}createEditor(){console.log("Create Editor"),this.editor=document.createElement("div"),this.editor.className="enei__editor",this.editor.innerHTML='\n<div class="enei__text" contenteditable="true"></div>\n<div class="enei__actions">\n    <button class="enei__button js-enei-ok">OK</button>\n    <button class="enei__button js-enei-cancel">Cancel</button>\n</div>\n',this.overlay.append(this.editor)}createOverlay(){console.log("Create Overlay"),this.overlay=document.createElement("div"),this.overlay.classList.add("enei__overlay"),this.body.append(this.overlay)}openEditor(e){const t=this,i=e.innerHTML,n=e.getBoundingClientRect();this.createOverlay(),this.createEditor(),this.editor.style.top=`${n.top}px`,this.editor.style.left=`${n.left}px`,this.editor.style.width=`${n.width}px`,this.editor.style.height=`${n.height+28}px`,this.content=this.editor.querySelector(".enei__text"),this.content.innerHTML=i,this.content.focus(),this.content.addEventListener("input",(()=>{const e=this.content.scrollHeight+42;t.editor.style.height=`${e}px`})),this.editor.querySelector(".js-enei-cancel").addEventListener("click",(()=>{this.overlay.remove()})),this.editor.querySelector(".js-enei-ok").addEventListener("click",(()=>{e.innerHTML=this.content.innerHTML,this.overlay.remove()}))}addEvents(){const e=this;window.addEventListener("keydown",(function(t){if(t.repeat)return;const i=[];(t.ctrlKey||t.metaKey)&&i.push("ctr"),t.altKey&&i.push("alt"),t.shiftKey&&i.push("shift"),t.key&&i.push(t.key),eneiEditorKey===i.join("+")&&e.switchMode()}));const t=document.querySelectorAll("[enei]"),i=function(t){e.inEditMode()&&e.openEditor(this)};t.forEach((e=>{e.addEventListener("click",i)}))}switchMode(){this.body.classList.toggle(e)}inEditMode(){return this.body.classList.contains(e)}}}();
//# sourceMappingURL=enei-editor.js.map
